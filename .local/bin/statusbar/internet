#!/bin/sh

# Show wifi ðŸ“¶ and percent strength or ðŸ“¡ if none.
# Show ðŸŒ if connected to ethernet or âŽ if none.



case $BLOCK_BUTTON in
	# 1) $TERMINAL -e sudo wifi-menu ;;
    1) wifi_s ;;
	2) sudo wifi toggle > /dev/null && (wifi | (rg -q 'on' && echo "wifi is turning on .." || echo "wifi turning off..") | xargs -I {} notify-send {} ) ;;
    3) [ "$(wc -l < /proc/net/wireless )" -gt 2 ] && notify-send "Total: $(awk '/wlo1/{print $2/(1024*1024)"Mâ¬‡ " $10/(1024*1024)"Mâ¬†"}' /proc/net/dev) " \
        "$(bmon -p wlo1 -o ascii | awk 'FNR%2==0{print $2"â¬‡ "$4"â¬†"}')"|| \
		( notify-send -u low "ðŸŒ Internet module" \
        "\- 1 finger = connect
\- 2 finger = status
\- 3 finger = on/off
ðŸ“¡: no Wi-Fi
ðŸ“¶: yes Wi-Fi
âŽ: no Ethernet
ðŸŒ: yes Ethernet
" && notify-send "$(wifi | awk '{print $1" is "$3}')") ;;
    #drag down
    4) pgrep bmon && pkill -9 bmon ;;
    #drag up
    5) notify-send "signal 5";;
    #shift+left click
	6) "$TERMINAL" -e "$EDITOR"  "$0" ;;
esac

grep -q "down" /sys/class/net/w*/operstate && wifiicon="ðŸ“¡" ||
    wifiicon="$(awk -v SSID=$(iwgetid -r) 'NR==3 { print "ðŸ“¶"SSID, int($3 * 100 / 70) "%" }' /proc/net/wireless )"

printf "%s %s\n" "$wifiicon"  "$(sed "s/down/âŽ/;s/up/ðŸŒ/" /sys/class/net/e*/operstate)"
